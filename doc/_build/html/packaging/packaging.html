<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Packaging Robocomp &mdash; RoboComp 2.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> RoboComp
          </a>
              <div class="version">
                2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">RoboComp</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Packaging Robocomp</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/packaging/packaging.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="packaging-robocomp">
<h1>Packaging Robocomp<a class="headerlink" href="#packaging-robocomp" title="Permalink to this headline"></a></h1>
<section id="deb-binary-packages">
<h2>deb binary packages<a class="headerlink" href="#deb-binary-packages" title="Permalink to this headline"></a></h2>
<p>we are using Cpack integrated with CMake for packaging robocomp.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd ~/robocomp
mkdir build
cd build
cmake ..
cmake-gui .. # optional
make package
bash fixup_deb.sh
</pre></div>
</div>
<p>will create a .deb package which we can install using any packaging application like dpkg.The fixup_deb.sh script will fix the control file permissions in the script. To install the created package, just double click on it(open with Software Center) or in terminal type :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo dpkg -i &lt;packagename&gt;.deb
</pre></div>
</div>
</section>
<section id="setting-up-a-ppa-in-launchpad">
<h2>Setting up a PPA in launchpad<a class="headerlink" href="#setting-up-a-ppa-in-launchpad" title="Permalink to this headline"></a></h2>
<p>After creating a launchpad account First, you need to create and publish an OpenPGP key</p>
<section id="generating-your-key-in-ubuntu">
<h3>Generating your key in Ubuntu<a class="headerlink" href="#generating-your-key-in-ubuntu" title="Permalink to this headline"></a></h3>
<p>The easiest way to generate a new OpenPGP key in Ubuntu is to use the Passwords and Encryption Keys tool.</p>
<p><strong>Step 1</strong> open Passwords and Encryption Keys.</p>
<p><strong>Step 2</strong> Select File &gt; New, select PGP Key and then follow the on-screen instructions.</p>
<p>Now you’ll see your new key listed in the Passwords and Encryption Keys tool. (it may take some time)</p>
</section>
<section id="publishing-your-key">
<h3>Publishing your key<a class="headerlink" href="#publishing-your-key" title="Permalink to this headline"></a></h3>
<p>Your key is useful only if other people can verify items that you sign. By publishing your key to a keyserver, which acts as a directory of people’s public keys, you can make your public key available to anyone else. Before you add your key to Launchpad, you need to push it to the Ubuntu keyserver.</p>
<p><strong>Step 1</strong> Open Passwords and Encryption Keys.</p>
<p><strong>Step 2</strong> Select the My Personal Keys tab, select your key.</p>
<p><strong>Step 3</strong>  Select Remote &gt; Sync and Publish Keys from the menu. Choose the Sync button. (You may need to add htp://keyserver.ubuntu.com to your key servers if you are not using Ubuntu.)</p>
<p>It can take up to thirty minutes before your key is available to Launchpad. After that time, you’re ready to import your new key into Launchpad!</p>
<p>OR you can directly to go <code class="docutils literal notranslate"><span class="pre">http://keyserver.ubuntu.com/</span></code> on your browser and add the PGP key there</p>
</section>
<section id="register-your-key-in-launchpad">
<h3>Register your key in launchpad<a class="headerlink" href="#register-your-key-in-launchpad" title="Permalink to this headline"></a></h3>
<p>fire up a terminal and run <code class="docutils literal notranslate"><span class="pre">gpg</span> <span class="pre">--fingerprint</span></code> should give you fingerprints of all the keys. copy paste the required fingerprint into the launchpad</p>
</section>
<section id="sign-ubuntu-code-of-conduct">
<h3>Sign Ubuntu Code of Conduct<a class="headerlink" href="#sign-ubuntu-code-of-conduct" title="Permalink to this headline"></a></h3>
<p>Download the Ubuntu code of conduct form launchpad
<code class="docutils literal notranslate"><span class="pre">gpg</span> <span class="pre">--clearsign</span> <span class="pre">UbuntuCodeofConductFile</span></code>  will sign the file
now copy the contents of the signed file and paste in launchpad</p>
</section>
<section id="wrapping-up">
<h3>Wrapping Up<a class="headerlink" href="#wrapping-up" title="Permalink to this headline"></a></h3>
<p>Now everything is set up. make sure you have some key in <code class="docutils literal notranslate"><span class="pre">OPENPGP</span> <span class="pre">Keys</span></code> section and also the signed code of conduct as <code class="docutils literal notranslate"><span class="pre">Yes</span></code> as shown.
<img alt="" src="../_images/launchpad.png" /></p>
</section>
</section>
<section id="uploading-package-to-ppa">
<h2>Uploading package to PPA<a class="headerlink" href="#uploading-package-to-ppa" title="Permalink to this headline"></a></h2>
<p>launchpad will only accept source packages and not binary. Launchpad will then build the packages. For building source packages we are using <code class="docutils literal notranslate"><span class="pre">debuild</span></code> which is a wrapper around the <em>dpkg-buildpackage + lintian</em>. so you will need to install <code class="docutils literal notranslate"><span class="pre">debuild</span></code> and <code class="docutils literal notranslate"><span class="pre">dput</span></code> on your system;</p>
<p>The source_package.cmake script is used to create a debian source package.</p>
<p>The main CMakeLists.txt file defines a target <code class="docutils literal notranslate"><span class="pre">spackage</span></code> that builds the source package in build/Debian with <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">spackage</span></code></p>
<p>For uploading the package to ppa, First change the <strong>PPA_PGP_KEY</strong> in <a class="reference external" href="../../cmake/package_details.cmake#L26">package_details.cmake</a> to details to the full-name of the PGP key  details registered with your ppa account For more details on setting up the pgp key see the <a class="reference internal" href="setting_up_ppa.html"><span class="doc std std-doc">tutorial</span></a>.Then create a source package by building the target <em>spackage</em>.Once the Source package is build successfully, upload it to your ppa by:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd Debian/
dput ppa:&lt;lp-username&gt;/&lt;ppa-name&gt; &lt;packet-&gt;source.changes
</pre></div>
</div>
<p>building of source package can be tested with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd Debian/robocomp-&lt;version&gt;
debuild -i -us -uc -S
</pre></div>
</div>
<p>If you are uploading a new version of robocomp, change the version number accordingly in the <a class="reference external" href="../../CMakeLists.txt#L31">toplevel cmake</a> before building, and then upload the source package as mentioned.</p>
<section id="note">
<h3>Note:<a class="headerlink" href="#note" title="Permalink to this headline"></a></h3>
<p>If you want to upload another source package to PPA which doesn’t have any changes in the source but maybe in the Debian files. you can build the spackage after commenting out <code class="docutils literal notranslate"><span class="pre">set(DEB_SOURCE_CHANGES</span> <span class="pre">&quot;CHANGED&quot;</span> <span class="pre">CACHE</span> <span class="pre">STRING</span> <span class="pre">&quot;source</span> <span class="pre">changed</span> <span class="pre">since</span> <span class="pre">the</span> <span class="pre">last</span> <span class="pre">upload&quot;)</span></code> in <a class="reference external" href="../../cmake/package_details.cmake#L27">package_details.cmake</a> so that the script will only increase the PPA version number and won’t include the source package for uploading to PPA (which otherwise will give an error).</p>
</section>
</section>
<section id="installing-robocomp-from-ppa">
<h2>Installing robocomp from PPA<a class="headerlink" href="#installing-robocomp-from-ppa" title="Permalink to this headline"></a></h2>
<p>First, you will need to add the PPA in your sources and then install robocomp package.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo add-apt-repository ppa:&lt;lp-username&gt;/robocomp
sudo apt-get update
sudo apt-get install robocomp
</pre></div>
</div>
<p>this will install robocomp along with basic components into /opt/robocomp.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, RoboLab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>