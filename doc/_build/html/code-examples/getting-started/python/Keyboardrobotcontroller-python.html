<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Control the directions of the bot using keyboard &mdash; RoboComp 2.0 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> RoboComp
          </a>
              <div class="version">
                2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../README.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">RoboComp</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Control the directions of the bot using keyboard</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/code-examples/getting-started/python/Keyboardrobotcontroller-python.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="control-the-directions-of-the-bot-using-keyboard">
<h1>Control the directions of the bot using keyboard<a class="headerlink" href="#control-the-directions-of-the-bot-using-keyboard" title="Permalink to this headline"></a></h1>
<p>For this python component. Import DifferentialRobot and build the component using robocompdsl. This has been explained in detail in the previous tutorials. Next write the algorithm in specificworker.py. The algorithm is as follows</p>
<ol class="arabic simple">
<li><p>Get the input data from the keyboard</p></li>
<li><p>Check the key and perform actions accordingly</p></li>
<li><p>If same key is pressed again then increase the parameter</p></li>
</ol>
<p>To implement this first initialize the code with the following in specific worker.py</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>screen = curses.initscr()  //get the curses screen window
curses.noecho()            //turn off input echoing
curses.cbreak()            //respond to keys immediately (don&#39;t wait for enter)
screen.keypad(True)        //map arrow keys to special values
</pre></div>
</div>
<p>Define a parameter key which will get the input form the keyboard. If in case the key pressed is up arrow (KEY_UP) then increase the adv by 20 (arbitrary) and by using differentialrobot’s setSpeedBase function control the bot. adv and rot are intialized to 0 initially. This is similar to other cases. The code is as follows,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def compute(self):
        try:
            key = screen.getch()

            if key == curses.KEY_UP:
                self.adv = self.adv + 20
                screen.addstr(5, 0, &#39;up: &#39;+ str(self.adv)+ &#39; : &#39; + str(self.rot))
                self.differentialrobot_proxy.setSpeedBase(self.adv, self.rot)
            elif key == curses.KEY_DOWN:
                self.adv = self.adv - 20
                screen.addstr(5, 0, &#39;down: &#39;+ str(self.adv)+ &#39; : &#39; + str(self.rot))
                self.differentialrobot_proxy.setSpeedBase(self.adv, self.rot)
            elif key == curses.KEY_LEFT:
                self.rot = self.rot - 0.1;
                screen.addstr(5, 0, &#39;left: &#39;+ str(self.adv)+ &#39; : &#39; + str(self.rot))
                self.differentialrobot_proxy.setSpeedBase(self.adv, self.rot)
            elif key == curses.KEY_RIGHT:
                self.rot = self.rot + 0.1;
                screen.addstr(5, 0, &#39;right: &#39;+ str(self.adv)+ &#39; : &#39; + str(self.rot))
                self.differentialrobot_proxy.setSpeedBase(self.adv, self.rot)
            elif key == ord(&#39; &#39;):
                self.rot = 0
                self.adv = 0
                screen.addstr(5, 0, &#39;stop: &#39;+ str(self.adv)+ &#39; : &#39; + str(self.rot))
                self.differentialrobot_proxy.setSpeedBase(self.adv, self.rot)
           	elif key == ord(&#39;q&#39;):
	    curses.endwin()
	    sys.exit()
        except Ice.Exception as e:
	curses.endwin()
            traceback.print_exc()
            print(e)
        return True
</pre></div>
</div>
<p>Save the code and simulate the innermodel simpleworld.xml and run the component by executing,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python src/&lt;componentname&gt;.py --Ice.Config=etc/config
</pre></div>
</div>
<p>The code for the entire component can be found <a class="reference external" href="https://github.com/robocomp/robocomp-robolab/tree/master/components/hardware/external_control/keyboardrobotcontroller">here</a></p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, RoboLab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>