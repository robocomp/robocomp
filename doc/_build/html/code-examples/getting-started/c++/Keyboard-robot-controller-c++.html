<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Control the directions of the bot using Keyboard &mdash; RoboComp 2.0 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> RoboComp
          </a>
              <div class="version">
                2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../README.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">RoboComp</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Control the directions of the bot using Keyboard</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/code-examples/getting-started/c++/Keyboard-robot-controller-c++.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="control-the-directions-of-the-bot-using-keyboard">
<h1>Control the directions of the bot using Keyboard<a class="headerlink" href="#control-the-directions-of-the-bot-using-keyboard" title="Permalink to this headline">ÔÉÅ</a></h1>
<p>For this component. Import DifferentialRobot and build the component using robocompdsl. This has been explained in detail in the previous tutorials. Next write the algorithm in specificworker.cpp. The algorithm is as follows</p>
<ol class="arabic simple">
<li><p>Get input data from keyboard</p></li>
<li><p>Check the input and perform the actions accordingly.</p></li>
</ol>
<p>We define a variable num and another character input which will store the entry from keyboard. istringstream is used to convert the string to the integer and store it in the variable num. Set the value of rot which is arbitrary here it is set to 0.3. In this example 1 is set as forward, 2 is set backward, 3 is left and 4 is right. The code is as follows,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">SpecificWorker</span><span class="p">::</span><span class="n">compute</span><span class="p">(</span> <span class="p">)</span>
<span class="p">{</span>
	<span class="nb">int</span> <span class="n">num</span><span class="p">;</span>
	<span class="n">char</span> <span class="nb">input</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
	<span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot; Enter </span><span class="se">\n</span><span class="s2"> 1: forward </span><span class="se">\n</span><span class="s2"> 3: left </span><span class="se">\n</span><span class="s2"> 2: backward </span><span class="se">\n</span><span class="s2"> 4: right&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
	<span class="n">std</span><span class="p">::</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="nb">input</span><span class="p">;</span>
	<span class="n">istringstream</span> <span class="p">(</span> <span class="nb">input</span> <span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">num</span><span class="p">;</span>
	<span class="nb">float</span> <span class="n">rot</span> <span class="o">=</span> <span class="mf">0.3</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span>
	<span class="p">{</span>
		<span class="n">differentialrobot_proxy</span><span class="o">-&gt;</span><span class="n">setSpeedBase</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  		<span class="n">usleep</span><span class="p">(</span><span class="mi">750000</span><span class="p">);</span>
		<span class="n">differentialrobot_proxy</span><span class="o">-&gt;</span><span class="n">setSpeedBase</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  		<span class="n">usleep</span><span class="p">(</span><span class="mi">500000</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">differentialrobot_proxy</span><span class="o">-&gt;</span><span class="n">setSpeedBase</span><span class="p">(</span><span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  		<span class="n">usleep</span><span class="p">(</span><span class="mi">750000</span><span class="p">);</span>
		<span class="n">differentialrobot_proxy</span><span class="o">-&gt;</span><span class="n">setSpeedBase</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  		<span class="n">usleep</span><span class="p">(</span><span class="mi">500000</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">differentialrobot_proxy</span><span class="o">-&gt;</span><span class="n">setSpeedBase</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">rot</span><span class="o">+</span><span class="mf">0.8</span><span class="p">);</span>
  		<span class="n">usleep</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
		<span class="n">differentialrobot_proxy</span><span class="o">-&gt;</span><span class="n">setSpeedBase</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  		<span class="n">usleep</span><span class="p">(</span><span class="mi">500000</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">differentialrobot_proxy</span><span class="o">-&gt;</span><span class="n">setSpeedBase</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">rot</span><span class="o">+</span><span class="mf">0.8</span><span class="p">);</span>
  		<span class="n">usleep</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
		<span class="n">differentialrobot_proxy</span><span class="o">-&gt;</span><span class="n">setSpeedBase</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  		<span class="n">usleep</span><span class="p">(</span><span class="mi">500000</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">else</span>
	<span class="p">{</span>
		<span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;invalid entry&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
	<span class="p">}</span>


<span class="p">}</span>
<span class="nb">bool</span> <span class="n">SpecificWorker</span><span class="p">::</span><span class="n">setParams</span><span class="p">(</span><span class="n">RoboCompCommonBehavior</span><span class="p">::</span><span class="n">ParameterList</span> <span class="n">params</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">Period</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">true</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Save the code and build the component and simulate the innermodel simpleworld.xml and run the component by executing,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>bin/&lt;componentname&gt; --Ice.Config=etc/config
</pre></div>
</div>
<p>The entire component can be found <a class="reference external" href="https://github.com/parasKumarSahu/robocomp-coding-examples/tree/master/Cpp-examples/keyboardRobotController">here</a></p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, RoboLab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>